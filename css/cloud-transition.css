/* Cloud Transition Overlay */
#cloud-transition {
  position: absolute;
  inset: 0;
  z-index: 100;
  opacity: 0;
  pointer-events: none;
  overflow: hidden;
  transition: opacity 1200ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: opacity, transform;
  background-color: rgba(255, 255, 255, 0.8);
}

#cloud-transition.active {
  opacity: 1;
}

/* Layered cloud backgrounds for parallax effect */
#cloud-transition::before,
#cloud-transition::after {
  content: '';
  position: absolute;
  inset: -10%;
  background-repeat: repeat;
  background-blend-mode: normal;
  mix-blend-mode: multiply;
}

/* First cloud layer - slower, larger */
#cloud-transition::before {
  background-image: url('../assets/clouds_1.png');
  background-size: 800px 600px;
  animation: cloud-drift-1 45s linear infinite;
  opacity: 0.8;
}

/* Second cloud layer - faster, smaller */
#cloud-transition::after {
  background-image: url('../assets/clouds_1.png');
  background-size: 600px 450px;
  animation: cloud-drift-2 35s linear infinite;
  opacity: 0.6;
}

/* Main container scaling effect */
#cloud-transition.active .cloud-inner {
  transform: scale(1.04);
}

.cloud-inner {
  width: 100%;
  height: 100%;
  transition: transform 1200ms cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform;
}

/* Drift animations */
@keyframes cloud-drift-1 {
  0% {
    background-position: 0% 0%;
  }
  100% {
    background-position: 100% 50%;
  }
}

@keyframes cloud-drift-2 {
  0% {
    background-position: 0% 0%;
  }
  100% {
    background-position: -100% -50%;
  }
}

/* Optional: Add subtle vignette effect */
#cloud-transition .cloud-vignette {
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at center,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.3) 100%
  );
  pointer-events: none;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  #cloud-transition::before {
    background-size: 500px 375px;
    animation-duration: 35s;
  }
  
  #cloud-transition::after {
    background-size: 400px 300px;
    animation-duration: 25s;
  }
  
  #cloud-transition.active .cloud-inner {
    transform: scale(1.02);
  }
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  #cloud-transition,
  #cloud-transition::before,
  #cloud-transition::after,
  .cloud-inner {
    animation: none !important;
    transition-duration: 300ms !important;
  }
}
